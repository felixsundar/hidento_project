{% extends 'secretcrushapp/base_d.html' %}

{% block content %}
<center>
    <div style="width:70%;margin-top:3rem;">
      <h2><b>Edit Crush</b></h2><br>
{% if error is not None%}
  <p>{{error.message}}</p><br>
  {% if error.code == 1 %}
    <a href="{% url 'linkInstagram' %}"> LinkInstagram </a>
  {% elif error.code == 2 %}
    <a href="{% url 'addCrush' %}"> Add Secret Crush </a>
  {% elif error.code == 3 %}
    <a href="{% url 'index' %}"> Go to Crushlist </a>
  {% endif %}
{% else %}
  <form method="post">
    {% csrf_token %}
<!--    {{ form.as_p }}-->
<!--    button should be disabled after clicking-->
    <input type="text" class="form-control" placeholder="Instagram Username of your crush" name="crushUsername"
                   maxlength="255" required id="id_crushUsername"
                   value="{{crushUsername}}" disabled>
    <input type="text" class="form-control mt-3"
                   placeholder="Nickname for your crush - Optional - Can be edited later" name="crushNickname"
                   maxlength="255" id="id_crushNickname"
                   value="{% if form.crushNickname.value %}{{form.crushNickname.value}}{% endif %}">

            <textarea class="form-control mt-3" placeholder="Message for your crush - Optional - Can be edited later"
                      name="crushMessage" maxlength="3000"
                      id="id_crushMessage">{%if form.crushMessage.value%}{{form.crushMessage.value}}{%endif%}</textarea>
            <div style="text-align:left" class="mt-3">
                <label class="pr-3">Who should be informed, if matched?</label>
                {% if form.whomToInform.value == '2' %}
                <label for="id_whomToInform_0c" class="mr-3"><input type="radio" name="whomToInform" value="1" required
                                                                    id="id_whomToInform_0c">
                    Choose at random</label>
                <label for="id_whomToInform_1c"><input type="radio" name="whomToInform" value="2" required
                                                       id="id_whomToInform_1c" checked>
                    Inform my crush</label>
                {% else %}
                <label for="id_whomToInform_0" class="mr-3"><input type="radio" name="whomToInform" value="1" required
                                                                   id="id_whomToInform_0" checked>
                    Choose at random</label>
                <label for="id_whomToInform_1"><input type="radio" name="whomToInform" value="2" required
                                                      id="id_whomToInform_1">
                    Inform my crush</label>
                {% endif %}
            </div>
            <div style="text-align:left" class="mt-2">
                <table>
                    <tr>
                        <td>
                            <label for="id_priorityPosition" class="pr-3">Priority Position</label></td>
                        <td><select class="form-control" name="priorityPosition"
                                    id="id_priorityPosition">
                            {% for priority, priority_string in priorities %}
                            {% if priority == form.priorityPosition.value %}
                            <option value="{{priority}}" selected>{{priority_string}}</option>
                            {% else %}
                            <option value="{{priority}}">{{priority_string}}</option>
                            {% endif %}
                            {% endfor %}

                        </select></td>
                    </tr>
                </table>
            </div>
    <button type="submit">Save Changes</button>
  </form>
  <a href="{% url 'crushList' %}"><button>Cancel</button></a>
  <form method="post" action="{% url 'deleteCrush' crushUsername %}">
    {% csrf_token %}
    <button type="submit">Delete Crush</button>
  </form>
{% endif %}
    </div>
</center>
{% endblock %}